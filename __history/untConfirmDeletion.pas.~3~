unit untConfirmDeletion;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;

type
  TfrmConfirmDeletion = class(TForm)
    lblMessage: TLabel;
    btnDelete: TButton;
    btnCancel: TButton;
    procedure FormCreate(Sender: TObject);
    procedure btnDeleteClick(Sender: TObject);
    procedure btnCancelClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  frmConfirmDeletion: TfrmConfirmDeletion;

implementation

{$R *.dfm}

uses
	untBackendFunctions,
  untOrders;

procedure TfrmConfirmDeletion.FormCreate(Sender: TObject);
begin
  if frmOrders.actionType = 'deleteOrder' then
    lblMessage.Caption := 'Confirmar exclusão do Pedido Nº ' +
      frmOrders.currentOrderId + '?'
  else if frmOrders.actionType = 'deleteItem' then
    lblMessage.Caption := 'Confirmar exclusão do Produto de Código ' +
      frmOrders.currentItemProductId +
      'do Pedido Nº ' + frmOrders.currentOrderId + '?'
end;

procedure TfrmConfirmDeletion.btnDeleteClick(Sender: TObject);
begin
  if frmOrders.actionType = 'deleteOrder' then
  begin
    DeleteOrder(frmOrders.currentOrderId);
	  ShowMessage('Item excluído.');
  end
  else if frmOrders.actionType = 'deleteItem' then
  begin
  	DeleteItem(
    	frmOrders.currentOrderId,
    	frmOrders.currentItemProductId
    );
    ShowMessage('Item excluído.');
  end;
end;

procedure TfrmConfirmDeletion.btnCancelClick(Sender: TObject);
begin
  Self.Close;
end;

end.
